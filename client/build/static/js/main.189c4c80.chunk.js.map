{"version":3,"sources":["constants.tsx","store.ts","hooks/useGoogle.ts","hooks/useQuery.ts","components/Dashboard.tsx","hooks/useSocket.ts","components/Messenger.tsx","hooks/useAWS.ts","components/Cooking.tsx","hooks/useTwilio.ts","components/Meeting.tsx","hooks/useGithub.ts","components/GoogleMap.tsx","components/Career.tsx","components/App.tsx","index.tsx"],"names":["userArrived","userLeft","markers","title","position","lat","lng","content","defaultRecipes","name","creator","difficulty","duration","image","text","initialState","error","user","slack","online","messages","twilio","token","github","total","contributions","recipes","createSlice","reducers","set","state","action","payload","addMessage","push","setOnline","addRecipe","unshift","email","updateRecipe","index","recipe","prev","actions","reducer","store","configureStore","devTools","middleware","getDefaultMiddleware","useSelector","useReduxSelector","apiURL","process","useGoogle","dispatch","useDispatch","authenticate","useCallback","code","a","fetch","method","credentials","headers","body","JSON","stringify","res","json","response","status","url","signout","useQuery","history","useHistory","location","useLocation","query","useMemo","URLSearchParams","search","props","forEach","value","key","setQuery","update","options","newQuery","Object","keys","replace","pathname","toString","Dashboard","className","target","rel","href","to","src","alt","useSocket","socket","mounted","useRef","useState","current","readyState","OPEN","loading","setLoading","socketURL","WebSocket","send","useEffect","addEventListener","event","message","parse","data","includes","Messenger","newMessage","setNewMessage","messageCount","setMessageCount","map","sender","toLowerCase","format","parseJSON","date","onSubmit","e","preventDefault","Form","Control","onChange","Button","disabled","length","Spinner","animation","useAWS","upload","filename","saveRecipes","filter","loadRecipes","Cooking","saveOnChange","editIndex","setEditIndex","deleteIndex","setDeleteIndex","uploadFile","file","then","form","FormData","fields","append","mode","link","deleteRecipe","newList","slice","splice","OverlayTrigger","placement","overlay","Tooltip","id","variant","onClick","type","call","files","accept","placeholder","min","max","as","rows","Modal","show","onHide","Header","closeButton","Footer","useTwilio","abort","getTwilioToken","room","AbortController","signal","identity","localStorage","getItem","nanoid","setItem","aborted","Meeting","localVideo","localAudio","remoteVideo","remoteAudio","onConnect","participant","on","track","kind","t","attach","classList","remove","detach","add","Video","connect","r","localAudioTrack","Array","from","localParticipant","audioTracks","values","localVideoTrack","videoTracks","participants","disconnect","removeAllListeners","ref","autoPlay","useGithub","getContributions","GoogleMap","mapRef","initMap","_window","window","googleMap","google","maps","Map","zoom","center","googleInfoWindow","InfoWindow","maxWidth","marker","googleMarker","Marker","setContent","open","addListener","close","useLayoutEffect","document","querySelector","createElement","appendChild","script","async","Career","view","parseISO","Date","start","startOfWeek","startOfMonth","weekStartsOn","end","endOfWeek","endOfMonth","days","differenceInDays","sub","months","Intl","NumberFormat","fill","_","Math","ceil","weekIndex","dayIndex","day","currentMonth","undefined","App","lastPage","exact","picture","path","Body","createBrowserHistory","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.189c4c80.chunk.js","sourcesContent":["import { Marker, Recipe } from './types';\r\n\r\n// Messenger page\r\nexport const userArrived = '<@U01RYFCUJ9H>: User arrived on the page';\r\n\r\nexport const userLeft = '<@U01RYFCUJ9H>: User left the page';\r\n\r\n// Career page\r\nexport const markers: Marker[] = [\r\n  {\r\n    title: 'Bayes E-Sport Solutions',\r\n    position: { lat: 52.5101722600148, lng: 13.401322741873111 },\r\n    content: `<div class=\"content\">\r\n      <h4>Bayes E-Sports Solutions</h4>\r\n      <h5>Lead TypeScript Developer</h5>\r\n      <div class=\"sub\"><span>Berlin</span> January 2020 - Current</div>\r\n      <p>I lead the development of applications that manage and visualise esports-related data.</p>\r\n      <div><b>TypeScript</b> <b>React</b> <b>SCSS</b> <b>HTML</b></div>\r\n    </div>`\r\n  },\r\n  {\r\n    title: 'Fearless Apps',\r\n    position: { lat: 51.924440486528425, lng: 4.477718813659339 },\r\n    content: `<div class=\"content\">\r\n      <h4>Fearless Apps</h4>\r\n      <h5>TypeScript Developer and Co-Owner</h5>\r\n      <div class=\"sub\"><span>Rotterdam</span> July 2017 - Current</div>\r\n      <p>My brother and I build high performance, data-rich applications by using cutting edge web technologies.</p>\r\n      <div><b>JavaScript</b> <b>React</b> <b>React Native</b> <b>NodeJS</b> <b>MongoDB</b> <b>SCSS</b> <b>HTML</b></div>\r\n    </div>`\r\n  },\r\n  {\r\n    title: 'SkillsTown',\r\n    position: { lat: 51.44449613801224, lng: 5.474178762822659 },\r\n    content: `<div class=\"content\">\r\n      <h4>SkillsTown</h4>\r\n      <h5>Web Application Developer</h5>\r\n      <div class=\"sub\"><span>Eindhoven</span> May 2019 - December 2019</div>\r\n      <p>I created software and provided support for all SkillsTown IT services. I was the lead developer in four major projects: Video Feedback Pro, Essential Editor, Skin Editor and Request for Change.</p>\r\n      <div><b>JavaScript</b> <b>Svelte</b> <b>PHP</b> <b>SQL</b> <b>NoSQL</b> <b>SCSS</b> <b>HTML</b></div>\r\n    </div>`\r\n  },\r\n  {\r\n    title: 'De Nationale Hypotheekbond',\r\n    position: { lat: 52.324694976902215, lng: 4.953558104788068 },\r\n    content: `<div class=\"content\">\r\n      <h4>De Nationale Hypotheekbond</h4>\r\n      <h5>Web Application Developer</h5>\r\n      <div class=\"sub\"><span>Amsterdam</span> August 2018 - March 2019</div>\r\n      <p>I set up a new React-based application stack and implemented it in six calculation tools used by both customers and professionals.</p>\r\n      <div><b>JavaScript</b> <b>React</b> <b>SCSS</b> <b>HTML</b></div>\r\n    </div>`\r\n  },\r\n  {\r\n    title: 'Software Skills',\r\n    position: { lat: 57.70624580247781, lng: 11.973183906521754 },\r\n    content: `<div class=\"content\">\r\n      <h4>Software Skills</h4>\r\n      <h5>Web Application Developer</h5>\r\n      <div class=\"sub\"><span>Gothenburg</span> September 2015 - July 2017</div>\r\n      <p>I maintained and improved multiple modern web applications that provide services to customers and test candidates. I did full stack development on all applications the company owns and runs.</p>\r\n      <div><b>JavaScript</b> <b>AngularJS</b> <b>NodeJS</b> <b>MongoDB</b> <b>MySQL</b> <b>SCSS</b> <b>HTML</b></div>\r\n    </div>`\r\n  },\r\n  {\r\n    title: 'Bullingdon Research Limited',\r\n    position: { lat: 51.53937117655123, lng: -0.1497240397359964 },\r\n    content: `<div class=\"content\">\r\n      <h4>Bullingdon Research Limited</h4>\r\n      <h5>Front-End Developer</h5>\r\n      <div class=\"sub\"><span>London</span> April 2012 - September 2012</div>\r\n      <p>Bullingdon Research created a data-visualisation app for finance experts which consists of 27 pages, 9 page types. It uses multiple HTML5 features and an incredible design.</p>\r\n      <div><b>JavaScript</b> <b>BackboneJS</b> <b>NodeJS</b> <b>SCSS</b> <b>HTML</b></div>\r\n    </div>`\r\n  },\r\n  {\r\n    title: 'Dutch Didit',\r\n    position: { lat: 52.27894337089385, lng: 5.164929035341137 },\r\n    content: `<div class=\"content\">\r\n      <h4>Dutch Didit</h4>\r\n      <h5>Front-End Developer</h5>\r\n      <div class=\"sub\"><span>Bussum</span> July 2011 - April 2012</div>\r\n      <p>Dutch Didit created a predication game, with leader boards, monthly prizes, score calculations, questions and answers, account system and it supports multiple languages. This app was later sold to a leading Dutch news paper.</p>\r\n      <div><b>JavaScript</b> <b>CSS</b> <b>HTML</b></div>\r\n    </div>`\r\n  },\r\n  {\r\n    title: 'Strait Solutions',\r\n    position: { lat: 51.90343336211668, lng: 4.349339392447792 },\r\n    content: `<div class=\"content\">\r\n      <h4>Strait Solutions</h4>\r\n      <h5>Front-End Developer</h5>\r\n      <div class=\"sub\"><span>Rotterdam</span> May 2010 - August 2010</div>\r\n      <p>Strait Solutions developed websites, designs and campaigns for customers.</p>\r\n      <div><b>JavaScript</b> <b>CSS</b> <b>HTML</b></div>\r\n    </div>`\r\n  },\r\n  {\r\n    title: 'Self-Employed',\r\n    position: { lat: 51.82482446611012, lng: 4.654893816741138 },\r\n    content: `<div class=\"content\">\r\n      <h4>Self-Employed</h4>\r\n      <h5>The Boy That Builds Websites</h5>\r\n      <div class=\"sub\"><span>Zwijndrecht</span> May 2007 - November 2009</div>\r\n      <p>I founded Lukosite in order to practise my skills on real projects.</p>\r\n      <div><b>JavaScript</b> <b>CSS</b> <b>HTML</b></div>\r\n    </div>`\r\n  }\r\n];\r\n\r\n// Cooking page\r\nexport const defaultRecipes: Recipe[] = [\r\n  {\r\n    name: 'Pasta in Tomatosauce',\r\n    creator: '',\r\n    difficulty: 1,\r\n    duration: '10 min',\r\n    image: '/pasta_tomatosauce.jpg',\r\n    text: `## Ingredients\r\n- Pasta\r\n- Tomato passata *(70%)*\r\n- Cream *(30%)*\r\n- Garlic powder\r\n- Paprika powder\r\n- White pepper\r\n- Salt\r\n- Sugar\r\n- Vegetable bouillon\r\n\r\n## Instructions\r\n1. Boil the pasta, add a large amount of salt\r\n2. Heat everything except the passata and pasta in a pan\r\n3. After the cream is boiling, add passata and stir\r\n4. When the pasta done, drain and add it to the pan`\r\n  },\r\n  {\r\n    name: 'Roasted Potatoes',\r\n    creator: '',\r\n    difficulty: 1,\r\n    duration: '70 min',\r\n    image: '/potatoes.jpg',\r\n    text: `## Ingredients\r\n- Potatoes *(~6 large potatoes per person)*\r\n- Baking powder\r\n- Oil\r\n- Salt\r\n- Favourite sauce *(Béarnaise / Mayonaisse)*\r\n\r\n## Instructions\r\n1. Peel your potatoes *(optional)* and cut in equal sizes\r\n2. Boil water with lots of salt and half a teaspoon of baking powder\r\n3. Boil your potatoes for 20 minutes just to soften\r\n4. Preheat your oven to 250 degrees\r\n5. Drain and rest the potatoes until no longer steaming\r\n6. Spread your potatoes on a tray and cover them in oil\r\n7. After roasting 20 minutes, keep roasting but turn the potatoes every 10 minutes for another 20 minutes\r\n8. Salt your potatoes and serve with sauce`\r\n  }\r\n];\r\n","import { TypedUseSelectorHook, useSelector as useReduxSelector } from 'react-redux';\r\nimport { configureStore, getDefaultMiddleware, createSlice } from '@reduxjs/toolkit';\r\n\r\nimport { State } from './types';\r\nimport { defaultRecipes } from './constants';\r\n\r\n// Redux store starting state\r\nconst initialState: State = {\r\n  error: '',\r\n  user: null,\r\n  slack: {\r\n    online: false,\r\n    messages: []\r\n  },\r\n  twilio: {\r\n    token: ''\r\n  },\r\n  github: {\r\n    total: 0,\r\n    contributions: {}\r\n  },\r\n  recipes: defaultRecipes\r\n};\r\n\r\n// Actions are generated from the methods inside the reducers property\r\nexport const { actions, reducer } = createSlice({\r\n  name: 'store',\r\n  initialState,\r\n  reducers: {\r\n    set: (state, action) => ({ ...state, ...action.payload }),\r\n    addMessage: (state, action) => {\r\n      state.slack.messages.push(action.payload);\r\n    },\r\n    setOnline: (state, action) => {\r\n      state.slack.online = action.payload;\r\n    },\r\n    addRecipe: (state, action) => {\r\n      state.recipes.unshift({\r\n        name: '',\r\n        creator: state.user?.email || '',\r\n        difficulty: 1,\r\n        duration: '',\r\n        image: '',\r\n        text: `## Ingredients\r\n- Love\r\n- Sweat\r\n- Tears\r\n\r\n## Instructions\r\n1. Put in hard work\r\n2. Serve while warm`,\r\n        ...action.payload\r\n      });\r\n    },\r\n    updateRecipe: (state, action) => {\r\n      const { index, ...recipe } = action.payload;\r\n\r\n      const prev = state.recipes[index];\r\n\r\n      state.recipes[index] = {\r\n        ...prev,\r\n        ...recipe\r\n      };\r\n    }\r\n  }\r\n});\r\n\r\nconst store = configureStore({\r\n  reducer,\r\n  devTools: true,\r\n  middleware: getDefaultMiddleware()\r\n});\r\n\r\nexport default store;\r\n\r\nexport { useDispatch } from 'react-redux';\r\n\r\n// Export a typed version of the useSelector hook\r\nexport const useSelector: TypedUseSelectorHook<State> = useReduxSelector;\r\n","import { useCallback } from 'react';\r\n\r\nimport { useDispatch, actions } from '../store';\r\n\r\nconst apiURL =\r\n  process.env.NODE_ENV === 'development'\r\n    ? process.env.REACT_APP_API_URL_DEV\r\n    : process.env.REACT_APP_API_URL_PROD;\r\n\r\nconst useGoogle = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  // Request our user object from the API either with a code, or using cookies\r\n  const authenticate = useCallback(\r\n    async (code: string) => {\r\n      try {\r\n        // Credentials: 'include' is required to send cookies\r\n        const res = await fetch(`${apiURL}/authenticate`, {\r\n          method: 'POST',\r\n          credentials: 'include',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            code // Code can be an empty string, in which case only cookies will be checked\r\n          })\r\n        });\r\n\r\n        const response = await res.json();\r\n\r\n        // If an error occured, store it\r\n        if (res.status >= 300) {\r\n          dispatch(actions.set({ error: `${res.url}\\n\\n${JSON.stringify(response, null, 2)}` }));\r\n\r\n          return { error: response };\r\n        }\r\n\r\n        // Store the user data\r\n        dispatch(\r\n          actions.set({\r\n            user: response\r\n          })\r\n        );\r\n\r\n        return { response };\r\n      } catch (error) {\r\n        return { error };\r\n      }\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  // Request the API to remove our cookie\r\n  const signout = useCallback(async () => {\r\n    try {\r\n      const res = await fetch(`${apiURL}/signout`, {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      const response = await res.json();\r\n\r\n      // If an error occured, store it\r\n      if (res.status >= 300) {\r\n        dispatch(actions.set({ error: `${res.url}\\n\\n${JSON.stringify(response, null, 2)}` }));\r\n\r\n        return { error: response };\r\n      }\r\n\r\n      // Store the user data, in this case, response should always be null\r\n      dispatch(\r\n        actions.set({\r\n          user: response\r\n        })\r\n      );\r\n\r\n      return { response };\r\n    } catch (error) {\r\n      return { error };\r\n    }\r\n  }, [dispatch]);\r\n\r\n  return {\r\n    signout,\r\n    authenticate\r\n  };\r\n};\r\n\r\nexport default useGoogle;\r\n","import { useCallback, useMemo } from 'react';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\n\r\nfunction useQuery() {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  // Create an object out of the URL query parameters\r\n  const query = useMemo(() => {\r\n    const query = new URLSearchParams(location.search);\r\n    const props: { [key: string]: string } = {};\r\n\r\n    query.forEach((value, key) => {\r\n      props[key] = value;\r\n    });\r\n\r\n    return props;\r\n  }, [location.search]);\r\n\r\n  // Push or replace the current URL with new query parameters coming from the update object\r\n  const setQuery = useCallback(\r\n    (update: { [key: string]: number | string | undefined }, options?: { replace?: boolean }) => {\r\n      const query = new URLSearchParams(location.search);\r\n      const newQuery: { [key: string]: string } = {};\r\n\r\n      // First put all current query paramters into the new query parameters\r\n      query.forEach((value, key) => {\r\n        newQuery[key] = value;\r\n      });\r\n\r\n      // Then update or delete any new query parameters from the update object\r\n      Object.keys(update).forEach((key) => {\r\n        if (update[key]) newQuery[key] = `${update[key]}`;\r\n        else delete newQuery[key];\r\n      });\r\n\r\n      // By default the browser navigates to the new URL, this option can replace it instead\r\n      if (options && options.replace) {\r\n        history.replace({\r\n          pathname: history.location.pathname,\r\n          search: new URLSearchParams(newQuery).toString()\r\n        });\r\n      } else {\r\n        history.push({\r\n          pathname: history.location.pathname,\r\n          search: new URLSearchParams(newQuery).toString()\r\n        });\r\n      }\r\n    },\r\n    [history, location.search]\r\n  );\r\n\r\n  return {\r\n    setQuery,\r\n    query\r\n  };\r\n}\r\n\r\nexport default useQuery;\r\n","import './Dashboard.scss';\r\nimport React, { FC } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst Dashboard: FC = () => {\r\n  return (\r\n    <div className=\"Dashboard\">\r\n      <div className=\"intro\">\r\n        <p>\r\n          This is an example of how to build a complex web application. Feel free to explore each\r\n          page and download the source code available on{' '}\r\n          <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/LuukvE/Luuk.gg\">\r\n            Github\r\n          </a>\r\n          . Both the client and server are written in{' '}\r\n          <a target=\"_blank\" rel=\"noreferrer\" href=\"https://www.typescriptlang.org\">\r\n            TypeScript\r\n          </a>\r\n          , using{' '}\r\n          <a target=\"_blank\" rel=\"noreferrer\" href=\"https://reactjs.org\">\r\n            React\r\n          </a>{' '}\r\n          and{' '}\r\n          <a target=\"_blank\" rel=\"noreferrer\" href=\"https://nodejs.org\">\r\n            NodeJS\r\n          </a>{' '}\r\n          respectively. If you need tips on how to develop apps or just want to chat, use the{' '}\r\n          <NavLink to=\"/messenger\">Messenger</NavLink> page,{' '}\r\n          <a target=\"_blank\" rel=\"noreferrer\" href=\"https://www.linkedin.com/in/luukvanegeraat\">\r\n            LinkedIn\r\n          </a>{' '}\r\n          or{' '}\r\n          <a target=\"_blank\" rel=\"noreferrer\" href=\"mailto:l.vanegeraat@gmail.com\">\r\n            l.vanegeraat@gmail.com\r\n          </a>\r\n          .\r\n        </p>\r\n        <img src=\"/luuk.jpg\" alt=\"\" />\r\n      </div>\r\n\r\n      <div>\r\n        <NavLink className=\"icon\" to=\"/career\">\r\n          <i className=\"fas fa-code\" /> Career\r\n        </NavLink>\r\n        <ul>\r\n          <li>\r\n            Implements the{' '}\r\n            <a target=\"_blank\" rel=\"noreferrer\" href=\"https://docs.github.com/en/graphql\">\r\n              Github GraphQL API\r\n            </a>{' '}\r\n            and{' '}\r\n            <a target=\"_blank\" rel=\"noreferrer\" href=\"https://developers.google.com/maps\">\r\n              Google Maps API\r\n            </a>\r\n          </li>\r\n          <li>Displays the number of code contributions I made on a calendar</li>\r\n          <li>Displays a world map with markers of places I worked at</li>\r\n        </ul>\r\n      </div>\r\n      <div>\r\n        <NavLink className=\"icon\" to=\"/cooking\">\r\n          <i className=\"fas fa-utensils\" /> Cooking\r\n        </NavLink>\r\n        <ul>\r\n          <li>\r\n            Implements the{' '}\r\n            <a\r\n              target=\"_blank\"\r\n              rel=\"noreferrer\"\r\n              href=\"https://developers.google.com/identity/protocols/oauth2\"\r\n            >\r\n              Google oAuth API\r\n            </a>{' '}\r\n            and{' '}\r\n            <a target=\"_blank\" rel=\"noreferrer\" href=\"https://aws.amazon.com/s3\">\r\n              AWS S3 API\r\n            </a>\r\n          </li>\r\n          <li>Displays a list of recipes with filters and sort options</li>\r\n          <li>Users can submit new recipes when signed in</li>\r\n        </ul>\r\n      </div>\r\n      <div>\r\n        <NavLink className=\"icon\" to=\"/messenger\">\r\n          <i className=\"fab fa-slack\" /> Messenger\r\n        </NavLink>\r\n        <ul>\r\n          <li>\r\n            Implements the{' '}\r\n            <a target=\"_blank\" rel=\"noreferrer\" href=\"https://api.slack.com\">\r\n              Slack API\r\n            </a>{' '}\r\n            and{' '}\r\n            <a\r\n              target=\"_blank\"\r\n              rel=\"noreferrer\"\r\n              href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\"\r\n            >\r\n              Websocket API\r\n            </a>\r\n          </li>\r\n          <li>Users can chat with me in real-time</li>\r\n          <li>Displays my Slack online status</li>\r\n        </ul>\r\n      </div>\r\n      <div>\r\n        <NavLink className=\"icon\" to=\"/meeting\">\r\n          <i className=\"fas fa-video\" /> Meeting\r\n        </NavLink>\r\n        <ul>\r\n          <li>\r\n            Implements the{' '}\r\n            <a target=\"_blank\" rel=\"noreferrer\" href=\"https://www.twilio.com/docs/usage/api\">\r\n              Twilio API\r\n            </a>{' '}\r\n            and{' '}\r\n            <a\r\n              target=\"_blank\"\r\n              rel=\"noreferrer\"\r\n              href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API\"\r\n            >\r\n              WebRTC API\r\n            </a>\r\n          </li>\r\n          <li>Users can have a 1:1 meeting with video/audio</li>\r\n          <li>Displays a sharable room link to invite others</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import { useEffect, useState, useCallback, MutableRefObject, useRef } from 'react';\r\n\r\nimport { useDispatch, actions } from '../store';\r\nimport { userArrived, userLeft } from '../constants';\r\n\r\nconst apiURL =\r\n  process.env.NODE_ENV === 'development'\r\n    ? process.env.REACT_APP_API_URL_DEV\r\n    : process.env.REACT_APP_API_URL_PROD;\r\n\r\nconst useSocket = (socket: MutableRefObject<WebSocket | null>) => {\r\n  const dispatch = useDispatch();\r\n\r\n  // Keep track on whether this current instance of useSocket is still used by components on the page\r\n  const mounted = useRef(true);\r\n\r\n  // Check if the referenced socket was already connected before or not\r\n  const [loading, setLoading] = useState(\r\n    !socket.current || socket.current.readyState !== socket.current.OPEN\r\n  );\r\n\r\n  // Replace the HTTP protocol with the WebSocket protocol\r\n  const socketURL = `${apiURL}`.replace('http://', 'ws://').replace('https://', 'wss://');\r\n\r\n  // If there was no referenced socket yet, create one\r\n  socket.current = socket.current || new WebSocket(socketURL);\r\n\r\n  // Sends a JSON message if the socket is open\r\n  const send = useCallback(\r\n    (text: string) => {\r\n      if (socket.current?.readyState !== socket.current?.OPEN) return;\r\n\r\n      socket.current?.send(JSON.stringify({ text }));\r\n    },\r\n    [socket]\r\n  );\r\n\r\n  // Initialise the WebSocket\r\n  useEffect(() => {\r\n    // If socket was already open, send a user arrived message to Slack\r\n    if (socket.current?.readyState === socket.current?.OPEN) send(userArrived);\r\n\r\n    // If the socket opens\r\n    socket.current?.addEventListener('open', () => {\r\n      // If this useSocket instance is no longer on the page, don't respond the socket opening\r\n      if (!mounted.current) return;\r\n\r\n      setLoading(false);\r\n\r\n      // Send a user arrived message to Slack\r\n      send(userArrived);\r\n    });\r\n\r\n    socket.current?.addEventListener('message', (event) => {\r\n      // If this useSocket instance is no longer on the page, don't respond the new messages\r\n      if (!mounted.current) return;\r\n\r\n      const message = JSON.parse(event.data);\r\n\r\n      // If the message contains a presence indicator update\r\n      if (typeof message.online === 'boolean') {\r\n        // Store the new presence indicator status\r\n        return dispatch(actions.setOnline(message.online));\r\n      }\r\n\r\n      // Don't store chat messages that are identical to the \"user arrived / left\" message\r\n      if ([userArrived, userLeft].includes(message.text)) return;\r\n\r\n      // Store the message\r\n      dispatch(actions.addMessage(message));\r\n    });\r\n\r\n    // Clear the referenced WebSocket on close or error\r\n    socket.current?.addEventListener('close', () => (socket.current = null));\r\n\r\n    socket.current?.addEventListener('error', () => (socket.current = null));\r\n\r\n    return () => {\r\n      // This useSocket instance is no longer used by a component on the page\r\n      mounted.current = false;\r\n\r\n      // Send a user left message to Slack\r\n      send(userLeft);\r\n    };\r\n  }, [socket, send, dispatch]);\r\n\r\n  return {\r\n    loading,\r\n    send\r\n  };\r\n};\r\n\r\nexport default useSocket;\r\n","import './Messenger.scss';\r\nimport React, { FC, MutableRefObject, useState } from 'react';\r\nimport { parseJSON, format } from 'date-fns';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\n\r\nimport { useSelector } from '../store';\r\nimport useSocket from '../hooks/useSocket';\r\n\r\nconst Messenger: FC<{ socket: MutableRefObject<WebSocket | null> }> = ({ socket }) => {\r\n  const { loading, send } = useSocket(socket);\r\n\r\n  // State used while typing the message\r\n  const [newMessage, setNewMessage] = useState('');\r\n\r\n  // If messageCount is higher than the amount of messages in the store, show a loader\r\n  const [messageCount, setMessageCount] = useState(0);\r\n  const { messages, online } = useSelector((state) => state.slack);\r\n\r\n  return (\r\n    <div className=\"Messenger\">\r\n      <div className={`message luuk  ${online ? 'online' : 'offline'}`}>\r\n        <img src=\"/luuk.jpg\" alt=\"\" />\r\n        <p>\r\n          You can write a message directly to my Slack app from this page. I am currently{' '}\r\n          {online ? 'online' : 'offline'}. If I respond too slowly you can send me your email\r\n          address and I can respond later.\r\n        </p>\r\n      </div>\r\n      {messages.map((message, index) => (\r\n        <div\r\n          className={`message ${message.sender.toLowerCase()} ${online ? 'online' : 'offline'}`}\r\n          key={index}\r\n        >\r\n          {message.sender === 'Luuk' && <img src=\"/luuk.jpg\" alt=\"\" />}\r\n          {message.sender === 'You' && <small>{format(parseJSON(message.date), 'HH:mm')}</small>}\r\n          <p>{message.text}</p>\r\n          {message.sender === 'Luuk' && <small>{format(parseJSON(message.date), 'HH:mm')}</small>}\r\n          {message.sender === 'You' && (\r\n            <b className=\"user-icon\">\r\n              <i className=\"fas fa-user\" />\r\n            </b>\r\n          )}\r\n        </div>\r\n      ))}\r\n      <form\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n\r\n          if (loading || !newMessage) return;\r\n\r\n          send(newMessage);\r\n\r\n          setNewMessage('');\r\n\r\n          setMessageCount(messageCount + 1);\r\n        }}\r\n      >\r\n        <Form.Control\r\n          value={newMessage}\r\n          onChange={(e) => {\r\n            setNewMessage(e.target.value);\r\n          }}\r\n        />\r\n        <Button disabled={loading}>\r\n          {messageCount > Object.keys(messages).length ? (\r\n            <Spinner animation=\"border\" />\r\n          ) : (\r\n            <span>\r\n              <i className=\"fas fa-paper-plane\" />\r\n            </span>\r\n          )}\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Messenger;\r\n","import { useState, useCallback } from 'react';\r\n\r\nimport { AWSUploadResponse } from '../types';\r\nimport { defaultRecipes } from '../constants';\r\nimport { useSelector, useDispatch, actions } from '../store';\r\n\r\nconst apiURL =\r\n  process.env.NODE_ENV === 'development'\r\n    ? process.env.REACT_APP_API_URL_DEV\r\n    : process.env.REACT_APP_API_URL_PROD;\r\n\r\nconst useAWS = () => {\r\n  const dispatch = useDispatch();\r\n  const [loading, setLoading] = useState(false);\r\n  const { user, recipes } = useSelector((state) => state);\r\n\r\n  // Upload image to AWS S3\r\n  const upload = useCallback(\r\n    async (filename: string) => {\r\n      setLoading(true);\r\n\r\n      try {\r\n        // Request a pre-signed upload URL for an image\r\n        const res = await fetch(`${apiURL}/upload`, {\r\n          method: 'POST',\r\n          credentials: 'include',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            filename\r\n          })\r\n        });\r\n\r\n        setLoading(false);\r\n\r\n        const response = await res.json();\r\n\r\n        // If an error occured, store it\r\n        if (res.status >= 300) {\r\n          dispatch(actions.set({ error: `${res.url}\\n\\n${JSON.stringify(response, null, 2)}` }));\r\n\r\n          return { error: response };\r\n        }\r\n\r\n        return { response: response as AWSUploadResponse };\r\n      } catch (error) {\r\n        setLoading(false);\r\n\r\n        return { error };\r\n      }\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  // Save recipes to AWS S3\r\n  const saveRecipes = useCallback(async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Request saving all recipes created by this user\r\n      const res = await fetch(`${apiURL}/save-recipes`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(recipes.filter((recipe) => recipe.creator === user?.email))\r\n      });\r\n\r\n      setLoading(false);\r\n\r\n      const response = await res.json();\r\n\r\n      // If an error occured, store it\r\n      if (res.status >= 300) {\r\n        dispatch(actions.set({ error: `${res.url}\\n\\n${JSON.stringify(response, null, 2)}` }));\r\n\r\n        return { error: response };\r\n      }\r\n\r\n      return { response: response };\r\n    } catch (error) {\r\n      setLoading(false);\r\n\r\n      return { error };\r\n    }\r\n  }, [recipes, user, dispatch]);\r\n\r\n  // Load recipes from AWS S3\r\n  const loadRecipes = useCallback(async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Request all recipes created by this user\r\n      const res = await fetch(\r\n        `https://s3.eu-central-1.amazonaws.com/${process.env.REACT_APP_AWS_BUCKET}/${user?.email}/index.json`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n\r\n      setLoading(false);\r\n\r\n      const response = await res.json();\r\n\r\n      // If an error occured, store it\r\n      if (res.status >= 300) {\r\n        dispatch(actions.set({ error: `${res.url}\\n\\n${JSON.stringify(response, null, 2)}` }));\r\n\r\n        return { error: response };\r\n      }\r\n\r\n      dispatch(\r\n        actions.set({\r\n          recipes: [...response, ...defaultRecipes]\r\n        })\r\n      );\r\n\r\n      return { response: response };\r\n    } catch (error) {\r\n      setLoading(false);\r\n\r\n      return { error };\r\n    }\r\n  }, [user, dispatch]);\r\n\r\n  return {\r\n    upload,\r\n    loading,\r\n    saveRecipes,\r\n    loadRecipes\r\n  };\r\n};\r\n\r\nexport default useAWS;\r\n","import './Cooking.scss';\r\nimport React, { FC, useCallback, useState, useEffect, useRef, ChangeEvent } from 'react';\r\nimport Markdown from 'react-markdown';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\n\r\nimport { useSelector, useDispatch, actions } from '../store';\r\nimport useAWS from '../hooks/useAWS';\r\n\r\nconst apiURL =\r\n  process.env.NODE_ENV === 'development'\r\n    ? process.env.REACT_APP_API_URL_DEV\r\n    : process.env.REACT_APP_API_URL_PROD;\r\n\r\nconst Cooking: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const saveOnChange = useRef(false);\r\n  const { loading, upload, saveRecipes, loadRecipes } = useAWS();\r\n  const { recipes, user } = useSelector((state) => state);\r\n  const [editIndex, setEditIndex] = useState<number | null>(null);\r\n  const [deleteIndex, setDeleteIndex] = useState<number | null>(null);\r\n\r\n  // When signed in, load recipes created by the user\r\n  useEffect(() => {\r\n    if (user) loadRecipes();\r\n  }, [user, loadRecipes]);\r\n\r\n  // When saveOnChange is true and recipes change, save them\r\n  useEffect(() => {\r\n    if (!saveOnChange.current) return;\r\n\r\n    saveRecipes();\r\n\r\n    saveOnChange.current = false;\r\n  }, [recipes, saveOnChange, saveRecipes]);\r\n\r\n  // Upload an image selected by the user and save it\r\n  const uploadFile = useCallback(\r\n    (file: File, index: number) => {\r\n      upload(file.name).then(async ({ error, response }) => {\r\n        if (error || !response) return;\r\n\r\n        // Create a form to POST to AWS\r\n        const form = new FormData();\r\n\r\n        // Add all fields required for the pre-signed URL upload to succeed\r\n        Object.keys(response.upload.fields).map((key) => {\r\n          return form.append(key, response.upload.fields[key]);\r\n        });\r\n\r\n        // Add the image\r\n        form.append('file', file);\r\n\r\n        // Send the request straight to AWS\r\n        await fetch(response.upload.url, {\r\n          method: 'POST',\r\n          mode: 'no-cors',\r\n          body: form\r\n        });\r\n\r\n        // This enables the useEffect hook that saves the recipes\r\n        // The hook will only trigger after the updateRecipes action has updated the store\r\n        saveOnChange.current = true;\r\n\r\n        // Update the store\r\n        dispatch(\r\n          actions.updateRecipe({\r\n            image: response.link,\r\n            index: index\r\n          })\r\n        );\r\n      });\r\n    },\r\n    [upload, dispatch]\r\n  );\r\n\r\n  const deleteRecipe = useCallback(\r\n    (index) => {\r\n      // Make a shallow copy of the recipes\r\n      const newList = recipes.slice();\r\n\r\n      // Remove the recipe based on its index\r\n      newList.splice(index, 1);\r\n\r\n      // This enables the useEffect hook that saves the recipes\r\n      // The hook will only trigger after the set action has updated the store\r\n      saveOnChange.current = true;\r\n\r\n      // Update the store\r\n      dispatch(\r\n        actions.set({\r\n          recipes: newList\r\n        })\r\n      );\r\n\r\n      // Hide the delete recipe modal\r\n      setDeleteIndex(null);\r\n\r\n      // Turn off recipe Edit mode\r\n      setEditIndex(null);\r\n    },\r\n    [recipes, dispatch]\r\n  );\r\n\r\n  return (\r\n    <div className=\"Cooking\">\r\n      <div className=\"sub-menu\">\r\n        <h1>Cooking Recipes {loading && <Spinner animation=\"border\" />}</h1>\r\n        {user ? (\r\n          <>\r\n            <OverlayTrigger\r\n              placement=\"left\"\r\n              overlay={\r\n                <Tooltip id=\"create-tooltip\">Recipes you create are only visible to you</Tooltip>\r\n              }\r\n            >\r\n              <Button\r\n                variant=\"success\"\r\n                onClick={() => {\r\n                  dispatch(actions.addRecipe({}));\r\n\r\n                  setEditIndex(0);\r\n                }}\r\n              >\r\n                <i className=\"fas fa-plus\" /> Create\r\n              </Button>\r\n            </OverlayTrigger>\r\n          </>\r\n        ) : (\r\n          <>\r\n            Add your own recipes{' '}\r\n            <a className=\"btn btn-success\" href={`${apiURL}/signin`} rel=\"noreferrer\">\r\n              <i className=\"fas fa-sign-in-alt\" /> Sign in\r\n            </a>\r\n          </>\r\n        )}\r\n      </div>\r\n      <div className=\"recipes\">\r\n        {recipes.map((recipe, index) => (\r\n          <div className=\"recipe\" key={index}>\r\n            {recipe.creator !== user?.email && !!recipe.image && <img src={recipe.image} alt=\"\" />}\r\n            {recipe.creator === user?.email && (\r\n              <div className=\"image-placeholder\">\r\n                {!!recipe.image && <img src={recipe.image} alt=\"\" />}\r\n                <Form.Control\r\n                  className=\"upload-image\"\r\n                  type=\"file\"\r\n                  onChange={(e: ChangeEvent<HTMLInputElement>) => {\r\n                    [].map.call(e.target.files, (file) => uploadFile(file, index));\r\n                  }}\r\n                  accept=\"image/jpeg\"\r\n                />\r\n              </div>\r\n            )}\r\n            {editIndex !== index && (\r\n              <div className=\"content\">\r\n                <h1>{recipe.name}</h1>\r\n                <small>\r\n                  <b>Difficulty:</b>{' '}\r\n                  <span className={`difficulty-icon level-${recipe.difficulty}`} />\r\n                </small>\r\n                <small>\r\n                  <b>Duration:</b> {recipe.duration}\r\n                </small>\r\n                <div className=\"text\">\r\n                  <Markdown>{recipe.text}</Markdown>\r\n                </div>\r\n                {editIndex === null && recipe.creator === user?.email && (\r\n                  <Button\r\n                    onClick={() => {\r\n                      setEditIndex(index);\r\n                    }}\r\n                    variant=\"success\"\r\n                  >\r\n                    {loading ? (\r\n                      <Spinner animation=\"border\" />\r\n                    ) : (\r\n                      <span>\r\n                        <i className=\"fas fa-pencil-alt\" /> Edit\r\n                      </span>\r\n                    )}\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            )}\r\n            {editIndex === index && (\r\n              <div className=\"content\">\r\n                <Form.Control\r\n                  placeholder=\"Title\"\r\n                  className=\"edit-title\"\r\n                  value={recipe.name}\r\n                  onChange={(e) => {\r\n                    dispatch(\r\n                      actions.updateRecipe({\r\n                        index,\r\n                        name: e.target.value\r\n                      })\r\n                    );\r\n                  }}\r\n                />\r\n                <small>\r\n                  <b>Difficulty:</b>{' '}\r\n                  <span className={`difficulty-icon level-${recipe.difficulty}`} />\r\n                  <Form.Control\r\n                    type=\"range\"\r\n                    min={1}\r\n                    max={3}\r\n                    value={recipe.difficulty}\r\n                    className=\"edit-difficulty\"\r\n                    onChange={(e) => {\r\n                      dispatch(\r\n                        actions.updateRecipe({\r\n                          index,\r\n                          difficulty: e.target.value\r\n                        })\r\n                      );\r\n                    }}\r\n                  />\r\n                </small>\r\n                <small>\r\n                  <b>Duration:</b>{' '}\r\n                  <Form.Control\r\n                    placeholder=\"10 min\"\r\n                    className=\"edit-duration\"\r\n                    value={recipe.duration}\r\n                    onChange={(e) => {\r\n                      dispatch(\r\n                        actions.updateRecipe({\r\n                          index,\r\n                          duration: e.target.value\r\n                        })\r\n                      );\r\n                    }}\r\n                  />\r\n                </small>\r\n                <div className=\"text\">\r\n                  <Form.Control\r\n                    placeholder=\"Ingredients & Instructions\"\r\n                    as=\"textarea\"\r\n                    rows={8}\r\n                    className=\"edit-text\"\r\n                    value={recipe.text}\r\n                    onChange={(e) => {\r\n                      dispatch(\r\n                        actions.updateRecipe({\r\n                          index,\r\n                          text: e.target.value\r\n                        })\r\n                      );\r\n                    }}\r\n                  />\r\n                  <Markdown>{recipe.text}</Markdown>\r\n                </div>\r\n                <Button\r\n                  onClick={async () => {\r\n                    const body = await saveRecipes();\r\n\r\n                    if (body.response) setEditIndex(null);\r\n                  }}\r\n                  variant=\"success\"\r\n                >\r\n                  {loading ? (\r\n                    <Spinner animation=\"border\" />\r\n                  ) : (\r\n                    <span>\r\n                      <i className=\"fas fa-save\" /> Save\r\n                    </span>\r\n                  )}\r\n                </Button>\r\n                <Button\r\n                  onClick={() => {\r\n                    setDeleteIndex(index);\r\n                  }}\r\n                  variant=\"outline-danger\"\r\n                >\r\n                  <i className=\"fas fa-trash\" /> Delete\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <Modal\r\n        animation={false}\r\n        className=\"modal\"\r\n        show={deleteIndex !== null}\r\n        onHide={() => {\r\n          setDeleteIndex(null);\r\n        }}\r\n      >\r\n        <Modal.Header closeButton>Are you sure?</Modal.Header>\r\n        <Modal.Footer>\r\n          <Button\r\n            variant=\"dark\"\r\n            onClick={() => {\r\n              setDeleteIndex(null);\r\n            }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            variant=\"danger\"\r\n            onClick={() => {\r\n              deleteRecipe(deleteIndex);\r\n            }}\r\n          >\r\n            Delete\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cooking;\r\n","import { useState, useCallback, useRef } from 'react';\r\nimport { nanoid } from 'nanoid';\r\n\r\nimport { useDispatch, actions } from '../store';\r\n\r\nconst apiURL =\r\n  process.env.NODE_ENV === 'development'\r\n    ? process.env.REACT_APP_API_URL_DEV\r\n    : process.env.REACT_APP_API_URL_PROD;\r\n\r\nconst useTwilio = () => {\r\n  const dispatch = useDispatch();\r\n  const abort = useRef<AbortController | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Load a Twilio token based on room and identity\r\n  const getTwilioToken = useCallback(\r\n    async (room: string) => {\r\n      setLoading(true);\r\n\r\n      // Abort previous getTwilioToken requests\r\n      if (abort.current) abort.current?.abort();\r\n\r\n      // Allow the upcoming request to be aborted\r\n      const { signal } = (abort.current = new AbortController());\r\n\r\n      // This is a unique string used to know what client is currently connecting\r\n      let identity = '';\r\n\r\n      // Find the identity previously saved or generate a new one\r\n      try {\r\n        identity = localStorage.getItem('identity') || nanoid();\r\n\r\n        // Save the current identity\r\n        localStorage.setItem('identity', identity);\r\n      } catch (e) {}\r\n\r\n      // Request a Twilio token from the API\r\n      try {\r\n        const res = await fetch(`${apiURL}/twilio`, {\r\n          signal,\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            identity,\r\n            room\r\n          })\r\n        });\r\n\r\n        if (signal.aborted) return { aborted: true };\r\n\r\n        setLoading(false);\r\n\r\n        const response = await res.json();\r\n\r\n        // If an error occured, store it\r\n        if (res.status >= 300) {\r\n          dispatch(actions.set({ error: `${res.url}\\n\\n${JSON.stringify(response, null, 2)}` }));\r\n\r\n          return { error: response };\r\n        }\r\n\r\n        // Store the Twilio token\r\n        dispatch(\r\n          actions.set({\r\n            twilio: response\r\n          })\r\n        );\r\n\r\n        return { response };\r\n      } catch (error) {\r\n        setLoading(false);\r\n\r\n        return { error };\r\n      }\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  return {\r\n    loading,\r\n    getTwilioToken\r\n  };\r\n};\r\n\r\nexport default useTwilio;\r\n","import './Meeting.scss';\r\nimport React, { FC, useEffect, useCallback, useRef } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Video from 'twilio-video';\r\nimport { nanoid } from 'nanoid';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\n\r\nimport useTwilio from '../hooks/useTwilio';\r\nimport useQuery from '../hooks/useQuery';\r\nimport { useDispatch, useSelector, actions } from '../store';\r\n\r\nconst Meeting: FC = () => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const { query, setQuery } = useQuery();\r\n  const { getTwilioToken } = useTwilio();\r\n  const { token } = useSelector((state) => state.twilio);\r\n\r\n  // Audio and Video of the local user of the browser\r\n  const localVideo = useRef<HTMLVideoElement | null>(null);\r\n  const localAudio = useRef<HTMLAudioElement | null>(null);\r\n\r\n  // Audio and Video of the remote user connecting over WebRTC\r\n  const remoteVideo = useRef<HTMLVideoElement | null>(null);\r\n  const remoteAudio = useRef<HTMLAudioElement | null>(null);\r\n\r\n  // When the remote user connects over WebRTC\r\n  const onConnect = useCallback((participant: Video.RemoteParticipant) => {\r\n    // And the users video or audio track is connecting\r\n    participant.on('trackSubscribed', (track) => {\r\n      if (track.kind === 'video') {\r\n        const t: Video.RemoteVideoTrack = track;\r\n\r\n        if (remoteVideo.current) {\r\n          // Connect the video track and show the Video element\r\n          t.attach(remoteVideo.current);\r\n\r\n          remoteVideo.current.classList.remove('hide');\r\n        }\r\n      } else if (track.kind === 'audio') {\r\n        // Connect the audio track to the Audio element\r\n        const t: Video.RemoteAudioTrack = track;\r\n\r\n        if (remoteAudio.current) t.attach(remoteAudio.current);\r\n      }\r\n    });\r\n\r\n    // When the remote user disconnects\r\n    participant.on('trackUnsubscribed', (track) => {\r\n      if (track.kind === 'video') {\r\n        const t: Video.RemoteVideoTrack = track;\r\n\r\n        // Disconnect the video track and hide the Video element\r\n        t.detach();\r\n\r\n        if (remoteVideo.current) remoteVideo.current.classList.add('hide');\r\n      } else if (track.kind === 'audio') {\r\n        const t: Video.RemoteAudioTrack = track;\r\n\r\n        // Disconnect the audio track\r\n        t.detach();\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  // When the page is loaded\r\n  useEffect(() => {\r\n    // Don't do anything if a token already exists\r\n    if (token) return;\r\n\r\n    // Get the room ID from local storage or generate a new one and show it in the URL\r\n    if (!query.room) {\r\n      try {\r\n        query.room = localStorage.getItem('room') || '';\r\n      } catch (e) {}\r\n\r\n      setQuery({ room: query.room || nanoid() }, { replace: true });\r\n\r\n      return;\r\n    }\r\n\r\n    // Save the current room ID to local storage\r\n    try {\r\n      localStorage.setItem('room', query.room);\r\n    } catch (e) {}\r\n\r\n    // Request a new token from the API and save it in the store\r\n    getTwilioToken(query.room);\r\n  }, [getTwilioToken, setQuery, query, token]);\r\n\r\n  // If token or query changes\r\n  useEffect(() => {\r\n    // Stop if token is not set\r\n    if (!token) return;\r\n\r\n    // Function-wide scope to allow disconnecting from the room\r\n    let room: Video.Room | null = null;\r\n\r\n    // Request audio and video tracks for both local and remote users from Twilio\r\n    Video.connect(token, {\r\n      name: query.room\r\n    }).then((r) => {\r\n      // Stop if meanwhile the token was cleared\r\n      if (!token) return;\r\n\r\n      // Put the room into the function-wide scope\r\n      room = r;\r\n\r\n      // Connect the audio and video of the local user\r\n      const localAudioTrack = Array.from(room.localParticipant.audioTracks.values())[0];\r\n\r\n      const localVideoTrack = Array.from(room.localParticipant.videoTracks.values())[0];\r\n\r\n      if (localAudio.current) localAudioTrack.track?.attach(localAudio.current);\r\n\r\n      if (localVideo.current) {\r\n        localVideoTrack.track?.attach(localVideo.current);\r\n\r\n        localVideo.current.classList.remove('hide');\r\n      }\r\n\r\n      // Loop over already connected remote users and listen for newly connecting remote users\r\n      const participants = Array.from(room.participants.values());\r\n\r\n      if (participants.length) onConnect(participants[0]);\r\n\r\n      room.on('participantConnected', onConnect);\r\n    });\r\n\r\n    return () => {\r\n      // If the local user leaves the page, disconnect from the room\r\n      if (room) {\r\n        room.disconnect();\r\n\r\n        room.removeAllListeners();\r\n      }\r\n\r\n      // And clear the token\r\n      dispatch(actions.set({ twilio: { token: '' } }));\r\n    };\r\n  }, [query.room, token, onConnect, dispatch]);\r\n\r\n  return (\r\n    <div className=\"Meeting\">\r\n      <div className=\"video-wrapper\">\r\n        <div className=\"local\">\r\n          <video className=\"hide\" ref={localVideo} autoPlay={true} />\r\n          <audio ref={localAudio} autoPlay={true} />\r\n          <Spinner animation=\"border\" />\r\n        </div>\r\n        <div className=\"remote\">\r\n          <video className=\"hide\" ref={remoteVideo} autoPlay={true} />\r\n          <audio ref={remoteAudio} autoPlay={true} />\r\n          <Spinner animation=\"border\" />\r\n        </div>\r\n      </div>\r\n      <Button\r\n        variant=\"secondary\"\r\n        onClick={() => {\r\n          history.push('/');\r\n\r\n          try {\r\n            localStorage.setItem('room', '');\r\n          } catch (e) {}\r\n        }}\r\n      >\r\n        Leave Room <i className=\"fas fa-sign-out-alt\" />\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Meeting;\r\n","import { useState, useCallback, useRef } from 'react';\r\n\r\nimport { useDispatch, actions } from '../store';\r\n\r\nconst apiURL =\r\n  process.env.NODE_ENV === 'development'\r\n    ? process.env.REACT_APP_API_URL_DEV\r\n    : process.env.REACT_APP_API_URL_PROD;\r\n\r\nconst useGithub = () => {\r\n  const dispatch = useDispatch();\r\n  const [loading, setLoading] = useState(false);\r\n  const abort = useRef<AbortController | null>(null);\r\n\r\n  // Load Github contributions statistics\r\n  const getContributions = useCallback(async () => {\r\n    setLoading(true);\r\n\r\n    // Abort previous getContributions requests\r\n    if (abort.current) abort.current?.abort();\r\n\r\n    // Allow the upcoming request to be aborted\r\n    const { signal } = (abort.current = new AbortController());\r\n\r\n    try {\r\n      // Request contribution statistics from the API\r\n      const res = await fetch(`${apiURL}/github`, {\r\n        signal,\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (signal.aborted) return { aborted: true };\r\n\r\n      setLoading(false);\r\n\r\n      const response = await res.json();\r\n\r\n      // If an error occured, store it\r\n      if (res.status >= 300) {\r\n        dispatch(actions.set({ error: `${res.url}\\n\\n${JSON.stringify(response, null, 2)}` }));\r\n\r\n        return { error: response };\r\n      }\r\n\r\n      // Store the Github contributions data\r\n      dispatch(\r\n        actions.set({\r\n          github: response\r\n        })\r\n      );\r\n\r\n      return { response };\r\n    } catch (error) {\r\n      setLoading(false);\r\n\r\n      return { error };\r\n    }\r\n  }, [dispatch]);\r\n\r\n  return {\r\n    loading,\r\n    getContributions\r\n  };\r\n};\r\n\r\nexport default useGithub;\r\n","import './GoogleMap.scss';\r\nimport React, { FC, useLayoutEffect, useRef, useCallback } from 'react';\r\n\r\nimport { markers } from '../constants';\r\n\r\nconst GoogleMap: FC = () => {\r\n  // Google Maps is displayed inside the div element referenced here\r\n  const mapRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // This method is executed by the Google Maps script that is lazy-loaded\r\n  const initMap = useCallback(() => {\r\n    const _window: any = window;\r\n\r\n    // Load the map into the .GoogleMap-container div\r\n    const googleMap: google.maps.Map = new _window.google.maps.Map(mapRef.current, {\r\n      zoom: 5,\r\n      center: { lat: 54.5, lng: 7 }\r\n    });\r\n\r\n    const googleInfoWindow: google.maps.InfoWindow = new _window.google.maps.InfoWindow({\r\n      content: '',\r\n      maxWidth: 400\r\n    });\r\n\r\n    // Loop over the hard-coded markers from the constants file\r\n    markers.forEach((marker, index) => {\r\n      const googleMarker: google.maps.Marker = new _window.google.maps.Marker({\r\n        position: marker.position,\r\n        title: marker.title,\r\n        map: googleMap\r\n      });\r\n\r\n      // Open the first marker in the list by default\r\n      if (index === 0) {\r\n        googleInfoWindow.setContent(marker.content);\r\n\r\n        googleInfoWindow.open(googleMap, googleMarker);\r\n      }\r\n\r\n      // When clicking on a marker, open the popup window\r\n      googleMarker.addListener('click', () => {\r\n        googleInfoWindow.close();\r\n\r\n        googleInfoWindow.setContent(marker.content);\r\n\r\n        googleInfoWindow.open(googleMap, googleMarker);\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  // After the page is loaded\r\n  useLayoutEffect(() => {\r\n    // If the .GoogleMap-container does not exist\r\n    if (!mapRef.current) {\r\n      // Find it\r\n      mapRef.current = document.querySelector('.GoogleMap-container');\r\n\r\n      // If it is not in the page, create it\r\n      if (!mapRef.current) {\r\n        mapRef.current = document.createElement('div');\r\n\r\n        mapRef.current.classList.add('GoogleMap-container');\r\n\r\n        document.body.appendChild(mapRef.current);\r\n      }\r\n    }\r\n\r\n    // Show the .GoogleMap-container div\r\n    mapRef.current?.classList.remove('hide');\r\n\r\n    const _window: any = window;\r\n\r\n    // If initMap is not yet added to the global window\r\n    if (!_window.initMap) {\r\n      // Add it\r\n      _window.initMap = initMap;\r\n\r\n      // And lazy-load the Google Maps Javascript library\r\n      const key = process.env.REACT_APP_GOOGLE_MAPS_KEY;\r\n\r\n      const script = document.createElement('script');\r\n\r\n      script.src = `https://maps.googleapis.com/maps/api/js?key=${key}&callback=initMap&libraries=&v=weekly`;\r\n\r\n      script.async = true;\r\n\r\n      document.body.appendChild(script);\r\n    }\r\n\r\n    return () => {\r\n      // If this component unloads, hide the .GoogleMap-container\r\n      mapRef.current?.classList.add('hide');\r\n    };\r\n  }, [initMap]);\r\n\r\n  return (\r\n    <div className=\"GoogleMap\">\r\n      <h1>\r\n        <i className=\"far fa-building\" /> Employment History\r\n      </h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GoogleMap;\r\n","import './Career.scss';\r\nimport React, { FC, useEffect } from 'react';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport {\r\n  differenceInDays,\r\n  format,\r\n  add,\r\n  sub,\r\n  startOfWeek,\r\n  startOfMonth,\r\n  endOfWeek,\r\n  endOfMonth,\r\n  parseISO\r\n} from 'date-fns';\r\n\r\nimport useGithub from '../hooks/useGithub';\r\nimport useQuery from '../hooks/useQuery';\r\nimport { useSelector } from '../store';\r\n\r\nimport GoogleMap from './GoogleMap';\r\n\r\nconst Career: FC = () => {\r\n  const { query, setQuery } = useQuery();\r\n  const { getContributions, loading } = useGithub();\r\n  const { total, contributions } = useSelector((state) => state.github);\r\n  const view = query.date ? parseISO(`${query.date}-01`) : new Date();\r\n  const start = startOfWeek(startOfMonth(view), { weekStartsOn: 1 });\r\n  const end = endOfWeek(endOfMonth(view), { weekStartsOn: 1 });\r\n  const days = differenceInDays(end, start);\r\n\r\n  // When loading the page, load all Github contributions from the API\r\n  useEffect(() => {\r\n    getContributions();\r\n  }, [getContributions]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"Career\">\r\n        <Spinner animation=\"border\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"Career\">\r\n      <div className=\"calendar-heading\">\r\n        <h1>\r\n          <i className=\"fab fa-github\" /> Github Activity\r\n        </h1>\r\n        <div className=\"switch-month\">\r\n          <span\r\n            onClick={() => {\r\n              setQuery({ date: format(sub(view, { months: 1 }), 'yyyy-MM') });\r\n            }}\r\n            className=\"icon\"\r\n          >\r\n            <i className=\"fas fa-chevron-left\" />\r\n          </span>\r\n          <div className=\"center\">{format(view, 'MMMM yyyy')}</div>\r\n          <span\r\n            onClick={() => {\r\n              setQuery({ date: format(add(view, { months: 1 }), 'yyyy-MM') });\r\n            }}\r\n            className=\"icon\"\r\n          >\r\n            <i className=\"fas fa-chevron-right\" />\r\n          </span>\r\n        </div>\r\n        <span className=\"total\">\r\n          {new Intl.NumberFormat().format(total)} contributions since 2011\r\n        </span>\r\n      </div>\r\n      <div className=\"weekdays\">\r\n        {new Array(7).fill(null).map((_, index) => (\r\n          <div key={index}>{format(new Date(2018, 0, index + 1), 'EEEE')}</div>\r\n        ))}\r\n      </div>\r\n      {new Array(Math.ceil(days / 7)).fill(null).map((_, weekIndex) => (\r\n        <div key={weekIndex} className=\"week\">\r\n          {new Array(7).fill(null).map((_, dayIndex) => {\r\n            const day = add(start, { days: weekIndex * 7 + dayIndex });\r\n            const date = format(day, 'yyyy-MM-dd');\r\n            const currentMonth = format(day, 'MM') === format(view, 'MM');\r\n\r\n            return (\r\n              <div\r\n                className={`day${!currentMonth ? ' not-current-month' : ''}${\r\n                  contributions[date] !== undefined\r\n                    ? ` level-${Math.ceil(\r\n                        (contributions[date] > 15 ? 15 : contributions[date]) / 3\r\n                      )}`\r\n                    : ''\r\n                }`}\r\n                key={dayIndex}\r\n              >\r\n                <span>{format(day, 'd')}</span>\r\n                {!!contributions[date] && (\r\n                  <div>\r\n                    {contributions[date]}\r\n                    <small>Contribution{contributions[date] !== 1 && 's'}</small>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      ))}\r\n      <GoogleMap />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Career;\r\n","import './App.scss';\r\nimport '@fortawesome/fontawesome-free/js/all';\r\nimport 'react-app-polyfill/ie11';\r\nimport React, { FC, useRef, useEffect } from 'react';\r\nimport { Redirect, Switch, Route, NavLink, useHistory } from 'react-router-dom';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\nimport useGoogle from '../hooks/useGoogle';\r\nimport useQuery from '../hooks/useQuery';\r\nimport { useDispatch, useSelector, actions } from '../store';\r\n\r\nimport Dashboard from './Dashboard';\r\nimport Messenger from './Messenger';\r\nimport Cooking from './Cooking';\r\nimport Meeting from './Meeting';\r\nimport Career from './Career';\r\n\r\nconst apiURL =\r\n  process.env.NODE_ENV === 'development'\r\n    ? process.env.REACT_APP_API_URL_DEV\r\n    : process.env.REACT_APP_API_URL_PROD;\r\n\r\nconst App: FC = () => {\r\n  const { query } = useQuery();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const { authenticate, signout } = useGoogle();\r\n  const { user, error } = useSelector((state) => state);\r\n\r\n  // Create a WebSocket reference for the Slack API to stay connected when navigating the website\r\n  const socket = useRef<WebSocket | null>(null);\r\n\r\n  // Sign in the user either based on cookie or query.code provided by the redirect from Google Signin\r\n  useEffect(() => {\r\n    authenticate(query.code || '');\r\n  }, [authenticate]); // eslint-disable-line\r\n\r\n  // When the app initialises, check for last page visited\r\n  useEffect(() => {\r\n    try {\r\n      const lastPage = localStorage.getItem('last_page');\r\n\r\n      // If last page is found, navigate to it\r\n      if (lastPage) history.push(lastPage);\r\n    } catch (e) {}\r\n  }, []); // eslint-disable-line\r\n\r\n  // Store the page visited every time the pathname changes\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem('last_page', history.location.pathname);\r\n    } catch (e) {}\r\n  }, [history, history.location.pathname]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header>\r\n        <NavLink to=\"/\" className=\"logo\">\r\n          Luuk.gg\r\n        </NavLink>\r\n\r\n        <NavLink exact to=\"/\">\r\n          <i className=\"fas fa-th-large\" /> Dashboard\r\n        </NavLink>\r\n        <NavLink to=\"/career\">\r\n          <i className=\"fas fa-code\" /> Career\r\n        </NavLink>\r\n        <NavLink to=\"/cooking\">\r\n          <i className=\"fas fa-utensils\" /> Cooking\r\n        </NavLink>\r\n        <NavLink to=\"/messenger\">\r\n          <i className=\"fab fa-slack\" /> Messenger\r\n        </NavLink>\r\n        <NavLink to=\"/meeting\">\r\n          <i className=\"fas fa-video\" /> Meeting\r\n        </NavLink>\r\n        {user ? (\r\n          <div className=\"user-account\">\r\n            {!!user.picture && <img className=\"user-picture\" src={user.picture} alt=\"\" />}\r\n            <span className=\"user-name\">{user.name}</span>\r\n            <span className=\"sign-out\" onClick={() => signout()}>\r\n              <i className=\"fas fa-sign-out-alt\" />\r\n            </span>\r\n          </div>\r\n        ) : (\r\n          <a href={`${apiURL}/signin`} rel=\"noreferrer\">\r\n            <i className=\"fas fa-sign-in-alt\" /> Sign in\r\n          </a>\r\n        )}\r\n      </header>\r\n      <main>\r\n        <Switch>\r\n          <Route path=\"/messenger\">\r\n            <Messenger socket={socket} />\r\n          </Route>\r\n          <Route path=\"/cooking\">\r\n            <Cooking />\r\n          </Route>\r\n          <Route path=\"/career\">\r\n            <Career />\r\n          </Route>\r\n          <Route path=\"/meeting\">\r\n            <Meeting />\r\n          </Route>\r\n          <Route exact path=\"/\">\r\n            <Dashboard />\r\n          </Route>\r\n          <Redirect to=\"/\" />\r\n        </Switch>\r\n      </main>\r\n      <Modal\r\n        animation={false}\r\n        className=\"modal\"\r\n        show={!!error}\r\n        onHide={() => {\r\n          dispatch(actions.set({ error: '' }));\r\n        }}\r\n      >\r\n        <Modal.Header closeButton>An error occured</Modal.Header>\r\n        <Modal.Body>\r\n          <pre>{error}</pre>\r\n        </Modal.Body>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Router } from 'react-router';\r\nimport { Provider } from 'react-redux';\r\nimport { createBrowserHistory } from 'history';\r\n\r\nimport store from './store';\r\nimport App from './components/App';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nReactDOM.render(\r\n  <Router history={history}>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </Router>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}